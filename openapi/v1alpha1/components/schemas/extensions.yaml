Extension:
  type: object
  properties:
    id:
      type: string
      format: uuid
      description: Unique identifier for the extension
    name:
      type: string
      description: Name of the extension
    slug:
      type: string
      description: URL-friendly identifier for the extension
    description:
      type: string
      description: Description of the extension
    enabled:
      type: boolean
      description: Whether the extension is enabled
    status:
      type: string
      description: Current status of the extension
    created_at:
      type: string
      format: date-time
      description: Timestamp when the extension was created
    updated_at:
      type: string
      format: date-time
      description: Timestamp when the extension was last updated
    deleted_at:
      type: [string, "null"]
      format: date-time
      description: Timestamp when the extension was deleted, if applicable
  required:
    - id
    - name
    - slug
    - description
    - enabled
    - status
    - created_at
    - updated_at

ExtensionResourceDefinition:
  type: object
  properties:
    id:
      type: string
      format: uuid
      description: Unique identifier for the resource definition
    extension_id:
      type: string
      format: uuid
      description: ID of the parent extension
    name:
      type: string
      description: Name of the resource definition
    description:
      type: string
      description: Description of the resource definition
    enabled:
      type: boolean
      description: Whether this resource definition is enabled
    slug_singular:
      type: string
      description: Singular slug for the resource type
    slug_plural:
      type: string
      description: Plural slug for the resource type
    version:
      type: string
      description: Version of the resource definition
    scope:
      type: string
      description: Scope of the resource (user, system, etc)
    schema:
      type: object
      additionalProperties: true
      description: JSON schema for resource validation
    admin_group:
      type: [string, "null"]
      format: uuid
      description: ID of the group that administers this resource type
    created_at:
      type: string
      format: date-time
      description: Timestamp when the definition was created
    updated_at:
      type: string
      format: date-time
      description: Timestamp when the definition was last updated
    deleted_at:
      type: [string, "null"]
      format: date-time
      description: Timestamp when the definition was deleted, if applicable
  required:
    - id
    - extension_id
    - name
    - description
    - enabled
    - slug_singular
    - slug_plural
    - version
    - scope
    - schema
    - created_at
    - updated_at

ExtensionResource:
  type: object
  description: |
    Represents an extension resource instance. Extension resources are custom data objects defined by ExtensionResourceDefinitions.
  properties:
    extension:
      type: string
      description: Extension slug
    kind:
      type: string
      description: Resource kind (singular slug)
    version:
      type: string
      description: Resource definition version
    metadata:
      $ref: '#/ExtensionResourceMetadata'
    spec:
      type: object
      additionalProperties: true
      description: Resource specification data
    status:
      oneOf:
        - $ref: '#/ExtensionResourceStatus'
        - type: "null"
  required:
    - extension
    - kind
    - version
    - metadata
    - spec

ExtensionResourceMetadata:
  type: object
  properties:
    owner_ref:
      oneOf:
        - $ref: '#/ExtensionResourceMetadataOwnerRef'
        - type: "null"
    id:
      type: string
      description: Unique identifier for the extension resource
      readOnly: true
    resource_version:
      type: [integer, "null"]
      format: int64
      description: Version number for optimistic concurrency control. Should only be provided on updates (not creates) to ensure the resource hasn't been modified since it was last read.
    created_at:
      type: string
      format: date-time
      description: Timestamp when the resource was created
      readOnly: true

ExtensionResourceMetadataOwnerRef:
  type: object
  properties:
    kind:
      type: string
      enum:
        - group
        - user
      description: Type of owner. For system-scoped resources, only 'group' is supported.
    id:
      type: string
      description: ID of the owner (group ID or user ID)
  required:
    - kind
    - id

ExtensionResourceMetadataCreateRequest:
  type: object
  properties:
    owner_ref:
      $ref: '#/ExtensionResourceMetadataOwnerRef'
  description: Metadata for creating an extension resource. The owner_ref field is optional.

ExtensionResourceMetadataUpdateRequest:
  type: object
  properties:
    owner_ref:
      $ref: '#/ExtensionResourceMetadataOwnerRef'
    resource_version:
      type: integer
      format: int64
      description: Version number for optimistic concurrency control. Required for updates to ensure the resource hasn't been modified.

ExtensionResourceStatus:
  type: object
  properties:
    state:
      type: [string, "null"]
      description: Current state of the resource
      readOnly: true
    updated_at:
      type: [string, "null"]
      format: date-time
      description: Timestamp when the status was last updated
      readOnly: true
    messages:
      oneOf:
        - type: array
          items:
            type: object
            additionalProperties: true
        - type: "null"
      description: Status messages. Can be updated to track resource state changes.

ExtensionResourceStatusUpdateRequest:
  type: object
  properties:
    messages:
      oneOf:
        - type: array
          items:
            type: object
            additionalProperties: true
          description: Status messages to track resource state changes
        - type: "null"

ExtensionResourceCreateRequest:
  type: object
  properties:
    extension:
      type: string
      description: Extension slug
    kind:
      type: string
      description: Resource kind (singular slug)
    version:
      type: string
      description: Resource definition version
    metadata:
      $ref: '#/ExtensionResourceMetadataCreateRequest'
    spec:
      type: object
      additionalProperties: true
      description: Resource specification data
  required:
    - extension
    - kind
    - version
    - metadata
    - spec

ExtensionResourceUpdateRequest:
  type: object
  properties:
    extension:
      type: string
      description: Extension slug
    kind:
      type: string
      description: Resource kind (singular slug)
    version:
      type: string
      description: Resource definition version
    metadata:
      $ref: '#/ExtensionResourceMetadataUpdateRequest'
    spec:
      type: object
      additionalProperties: true
      description: Resource specification data
    status:
      $ref: '#/ExtensionResourceStatusUpdateRequest'
  required:
    - extension
    - kind
    - version
    - metadata
    - spec

Extension:
  type: object
  properties:
    id:
      type: string
      format: uuid
      description: Unique identifier for the extension
    name:
      type: string
      description: Name of the extension
    slug:
      type: string
      description: URL-friendly identifier for the extension
    description:
      type: string
      description: Description of the extension
    version:
      type: string
      description: Version of the extension
    created_at:
      type: string
      format: date-time
      description: Timestamp when the extension was created
    updated_at:
      type: string
      format: date-time
      description: Timestamp when the extension was last updated
  required:
    - id
    - name
    - slug
    - version
    - created_at
    - updated_at

ExtensionResourceDefinition:
  type: object
  properties:
    id:
      type: string
      format: uuid
    extension_id:
      type: string
      format: uuid
    name:
      type: string
    description:
      type: string
    version:
      type: string
    slug_singular:
      type: string
    slug_plural:
      type: string
    scope:
      type: string
    schema:
      type: object
      additionalProperties: true
    admin_group:
      type: string
      format: uuid
    created_at:
      type: string
      format: date-time
    updated_at:
      type: string
      format: date-time
    enabled:
      type: boolean

ExtensionResource:
  type: object
  properties:
    extension:
      type: string
      description: Extension slug
    kind:
      type: string
      description: Resource kind (singular slug)
    version:
      type: string
      description: Resource definition version
    metadata:
      $ref: '#/ExtensionResourceMetadata'
    spec:
      type: object
      additionalProperties: true
      description: Resource specification data
    status:
      $ref: '#/ExtensionResourceStatus'
  required:
    - extension
    - kind
    - version
    - metadata
    - spec

ExtensionResourceMetadata:
  type: object
  properties:
    owner_ref:
      $ref: '#/ExtensionResourceMetadataOwnerRef'
    id:
      type: string
      description: Unique identifier for the extension resource
      readOnly: true
    resource_version:
      type: integer
      format: int64
      description: Version number for optimistic concurrency control
      readOnly: true
    created_at:
      type: string
      format: date-time
      description: Timestamp when the resource was created
      readOnly: true

ExtensionResourceMetadataOwnerRef:
  type: object
  properties:
    kind:
      type: string
      enum:
        - group
        - user
      description: Type of owner (group or user)
    id:
      type: string
      description: ID of the owner
  required:
    - kind
    - id

ExtensionResourceStatus:
  type: object
  properties:
    state:
      type: string
      description: Current state of the resource
      readOnly: true
    updated_at:
      type: string
      format: date-time
      description: Timestamp when the status was last updated
      readOnly: true
    messages:
      type: array
      items:
        type: object
        additionalProperties: true
      description: Status messages
      readOnly: true

ExtensionResourceCreateRequest:
  type: object
  properties:
    data:
      type: object
      additionalProperties: true
      description: Arbitrary data to store in the resource
  required:
    - data

ExtensionResourceUpdateRequest:
  type: object
  properties:
    data:
      type: object
      additionalProperties: true
      description: Updated data to store in the resource
  required:
    - data

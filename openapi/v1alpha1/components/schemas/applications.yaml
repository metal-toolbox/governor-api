Application:
  type: object
  description: |
    Represents an application in the Governor system. Applications are linked to groups to control access. Returned by application endpoints.
  properties:
    id:
      type: string
      format: uuid
      description: Unique identifier for the application
    name:
      type: string
      description: Name of the application
    slug:
      type: string
      description: URL-friendly identifier for the application
    created_at:
      type: string
      format: date-time
      description: Timestamp when the application was created
    updated_at:
      type: string
      format: date-time
      description: Timestamp when the application was last updated
    deleted_at:
      type: [string, "null"]
      format: date-time
      description: Timestamp when the application was deleted, if applicable
    approver_group_id:
      type: [string, "null"]
      format: uuid
      description: ID of the group that approves application access requests
    type_id:
      type: [string, "null"]
      format: uuid
      description: ID of the application type
    type:
      description: The application type details, included when populated
      oneOf:
        - $ref: '#/ApplicationType'
        - type: "null"
  required:
    - id
    - name
    - slug
    - created_at
    - updated_at

ApplicationType:
  type: object
  properties:
    id:
      type: string
      format: uuid
      description: Unique identifier for the application type
    name:
      type: string
      description: Name of the application type
    slug:
      type: string
      description: URL-friendly identifier for the application type
    description:
      type: string
      description: Description of the application type
    logo_url:
      type: [string, "null"]
      format: uri
      description: URL to the logo image for this application type
    created_at:
      type: string
      format: date-time
      description: Timestamp when the application type was created
    updated_at:
      type: string
      format: date-time
      description: Timestamp when the application type was last updated
    deleted_at:
      type: [string, "null"]
      format: date-time
      description: Timestamp when the application type was deleted, if applicable
  required:
    - id
    - name
    - slug
    - description
    - created_at
    - updated_at

ApplicationWithType:
  type: object
  allOf:
    - $ref: '#/Application'
    - type: object
      properties:
        type:
          $ref: '#/ApplicationType'

ApplicationRequest:
  type: object
  description: Request payload for creating or updating an application (POST /applications, PUT /applications/:id).
  properties:
    name:
      type: string
      description: Name of the application
      examples: ["My Service"]
    type_id:
      type: string
      format: uuid
      description: ID of the application type
      examples: ["3fa85f64-5717-4562-b3fc-2c963f66afa6"]
    approver_group_id:
      type: [string, "null"]
      format: uuid
      description: ID of the group that approves application access requests (if needed)
  required:
    - name
    - type_id

ApplicationTypeRequest:
  type: object
  properties:
    name:
      type: string
      description: Name of the application type
      examples: ["Database Service"]
    description:
      type: string
      description: Description of the application type
      examples: ["Database services that require access management"]
    logo_url:
      type: [string, "null"]
      format: uri
      description: URL to the logo image for this application type
      examples: ["https://example.com/logos/database.png"]
  required:
    - name
    - description

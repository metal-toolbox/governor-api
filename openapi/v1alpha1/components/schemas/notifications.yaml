NotificationPreferences:
  type: array
  items:
    $ref: '#/UserNotificationPreference'
  description: List of user notification preferences

UserNotificationPreference:
  type: object
  properties:
    notification_type:
      type: string
      description: Slug identifier for the notification type
    enabled:
      type: [boolean, "null"]
      description: Whether this notification type is enabled
    notification_targets:
      oneOf:
        - type: array
          items:
            $ref: '#/UserNotificationPreferenceTarget'
          description: Notification targets for this preference
        - type: "null"
  required:
    - notification_type

UserNotificationPreferenceTarget:
  type: object
  properties:
    target:
      type: string
      description: Target slug identifier (e.g., email, slack, webhook)
    enabled:
      type: [boolean, "null"]
      description: Whether notifications to this target are enabled
  required:
    - target

NotificationPreferencesUpdateRequest:
  type: object
  properties:
    preferences:
      oneOf:
        - type: array
          items:
            $ref: '#/UserNotificationPreference'
          description: List of notification preferences to update
        - type: "null"
  required:
    - preferences

UserNotificationPreferencesUpdate:
  type: object
  properties:
    channels:
      oneOf:
        - type: [object, "null"]
          properties:
            email:
              type: boolean
            slack:
              type: boolean
            webhook:
              type: boolean
          description: Notification channels to enable/disable
        - type: "null"
    notification_types:
      oneOf:
        - type: [object, "null"]
          additionalProperties:
            type: object
            properties:
              enabled:
                type: boolean
              channels:
                type: array
                items:
                  type: string
                  enum: [email, slack, webhook]
          description: Settings for specific notification types
        - type: "null"

NotificationType:
  type: object
  properties:
    id:
      type: string
      format: uuid
      description: Unique identifier for the notification type
    name:
      type: string
      description: Name of the notification type
    slug:
      type: string
      description: Unique slug identifier for the notification type
    description:
      type: string
      description: Description of the notification type
    default_enabled:
      type: boolean
      description: Whether this type is enabled by default
    created_at:
      type: string
      format: date-time
      description: Timestamp when the notification type was created
    updated_at:
      type: string
      format: date-time
      description: Timestamp when the notification type was last updated
    deleted_at:
      type: [string, "null"]
      format: date-time
      description: Timestamp when the notification type was deleted, if applicable
  required:
    - id
    - name
    - slug
    - description
    - default_enabled
    - created_at
    - updated_at

NotificationTarget:
  type: object
  description: |
    System-level notification target configuration (e.g., email, Slack, webhook).
    These define the available notification channels in the system.
  properties:
    id:
      type: string
      format: uuid
      description: Unique identifier for the notification target
    name:
      type: string
      description: Name of the notification target
    slug:
      type: string
      description: Unique slug identifier for the notification target
    description:
      type: string
      description: Description of the notification target
    default_enabled:
      type: boolean
      description: Whether this target is enabled by default for new users
    created_at:
      type: string
      format: date-time
      description: Timestamp when the target was created
    updated_at:
      type: string
      format: date-time
      description: Timestamp when the target was last updated
    deleted_at:
      type: [string, "null"]
      format: date-time
      description: Timestamp when the target was deleted, if applicable
  required:
    - id
    - name
    - slug
    - description
    - default_enabled
    - created_at
    - updated_at

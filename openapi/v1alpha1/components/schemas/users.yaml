User:
  type: object
  description: |
    Represents a user in the Governor system. Core user object returned by user endpoints (GET /users/:id, POST /users, etc). Contains basic user information and timestamps.
  properties:
    id:
      type: string
      format: uuid
      description: Unique identifier for the user
    name:
      type: [string, "null"]
      description: Name of the user
    email:
      type: string
      format: email
      description: Email address of the user
    external_id:
      type: [string, "null"]
      description: External ID for the user from the identity provider
    avatar_url:
      type: 
        - string
        - 'null'
      format: uri
      description: URL to user's profile image
    created_at:
      type: string
      format: date-time
      description: Timestamp when the user was created
    updated_at:
      type: string
      format: date-time
      description: Timestamp when the user was last updated
    deleted_at:
      type: [string, "null"]
      format: date-time
      description: Timestamp when the user was deleted (if applicable)
    metadata:
      type: [object, "null"]
      additionalProperties: true
      description: Additional metadata for the user
  required:
    - id
    - email
    - created_at
    - updated_at

UserProfile:
  type: object
  description: |
    Extended user profile returned by GET /users/:id. Includes all User fields plus membership information, GitHub details, and metadata.
  properties:
    id:
      type: string
      format: uuid
      description: Unique identifier for the user
    name:
      type: [string, "null"]
      description: Name of the user (optional, can be null)
    email:
      type: string
      format: email
      description: Email address of the user
    external_id:
      type: [string, "null"]
      description: External ID for the user from the identity provider
    avatar_url:
      type: [string, "null"]
      format: uri
      description: URL to user's profile image
    status:
      type: [string, "null"]
      enum: [active, inactive, pending, suspended]
      description: Current status of the user account
    created_at:
      type: string
      format: date-time
      description: Timestamp when the user was created
    updated_at:
      type: [string, "null"]
      format: date-time
      description: Timestamp when the user was last updated
    deleted_at:
      type: [string, "null"]
      format: date-time
      description: Timestamp when the user was deleted (if applicable)
    github_id:
      type: [string, "null"]
      description: GitHub user ID if connected with GitHub
    github_username:
      type: [string, "null"]
      description: GitHub username if connected with GitHub
    metadata:
      type: [object, "null"]
      additionalProperties: true
      description: Additional metadata for the user
      example:
        department: "engineering"
        location: "remote"
        details: 
          team: "platform"
          level: 3
    memberships:
      oneOf:
        - type: array
          items:
            type: string
            format: uuid
          description: List of group IDs the user is a member of (directly or indirectly)
        - type: "null"
    memberships_direct:
      oneOf:
        - type: array
          items:
            type: string
            format: uuid
          description: List of group IDs the user is directly a member of
        - type: "null"
    membership_requests:
      oneOf:
        - type: array
          items:
            type: string
            format: uuid
          description: List of group IDs the user has requested to join
        - type: "null"
    notification_preferences:
      $ref: '../schemas/notifications.yaml#/NotificationPreferences'
  required:
    - id
    - email

AuthenticatedUserProfile:
  type: object
  description: Profile of the authenticated user. Extends UserProfile with admin flag. Used in GET /user endpoint.
  allOf:
    - $ref: '#/UserProfile'
    - type: object
      properties:
        admin:
          type: boolean
          description: Whether the user has admin privileges
      required:
        - admin

AuthenticatedUserRequestPayload:
  type: object
  properties:
    avatar_url:
      type: [string, "null"]
      format: uri
      description: URL to the user's avatar image
    github_username:
      type: [string, "null"]
      description: GitHub username if connected with GitHub
    notification_preferences:
      $ref: '../schemas/notifications.yaml#/UserNotificationPreferencesUpdate'

UserCreateRequest:
  type: object
  description: Request payload for creating a new user (POST /users). Requires name and email; other fields are optional.
  properties:
    name:
      type: string
      description: Full name of the user
      examples: ["Jane Smith"]
    email:
      type: string
      format: email
      description: Email address of the user
      examples: ["jane.smith@example.com"]
    external_id:
      type: [string, "null"]
      description: External identity provider user ID
      examples: ["auth0|123456789"]
    avatar_url:
      type: [string, "null"]
      format: uri
      description: URL to the user's avatar image
      examples: ["https://example.com/avatars/jane.jpg"]
    github_username:
      type: [string, "null"]
      description: GitHub username if connected with GitHub
      examples: ["jane-dev"]
    status:
      type: string
      enum: [active, inactive, pending]
      default: active
      description: Initial status for the user account
    metadata:
      type: object
      additionalProperties: true
      description: Additional metadata for the user
      example:
        department: "engineering"
        location: "remote"
        details: 
          team: "platform"
          level: 3
  required:
    - name
    - email

UserUpdateRequest:
  type: object
  description: Request payload for updating an existing user (PUT /users/:id). All fields are optional and nullable for partial updates.
  properties:
    name:
      type: [string, "null"]
      description: Full name of the user
    email:
      type: [string, "null"]
      format: email
      description: Email address of the user
    avatar_url:
      type: [string, "null"]
      format: uri
      description: URL to the user's avatar image
    github_username:
      type: [string, "null"]
      description: GitHub username if connected with GitHub
    status:
      type: string
      enum: [active, inactive, pending, suspended]
      description: Updated status for the user account
    metadata:
      type: object
      additionalProperties: true
      description: Metadata to merge with existing user metadata
      example:
        department: "engineering"
        projects: ["alpha", "beta"]

UserWithMemberships:
  type: object
  allOf:
    - $ref: '#/User'
    - type: object
      properties:
        memberships:
          type: array
          items:
            $ref: '../schemas/groups.yaml#/GroupMembership'
          description: Group memberships for this user

AuthenticatedUserGroupApplicationRequest:
  type: object
  description: Group application request shown to authenticated user in GET /user/groups/approvals. Extends GroupApplicationRequest.
  allOf:
    - $ref: '../schemas/groups.yaml#/GroupApplicationRequest'

AuthenticatedUserGroupMemberRequest:
  type: object
  description: Group membership request shown to authenticated user in GET /user/groups/approvals or GET /user/groups/requests. Extends GroupMemberRequest with additional admin flag.
  allOf:
    - $ref: '../schemas/groups.yaml#/GroupMemberRequest'
    - type: object
      properties:
        admin:
          type: boolean
          description: Whether the authenticated user is an admin of the group being requested
      required:
        - admin

AuthenticatedUserRequests:
  type: object
  description: Combined response for GET /user/groups/approvals and GET /user/groups/requests endpoints. Contains both application requests and member requests.
  properties:
    application_requests:
      oneOf:
        - type: array
          items:
            $ref: '#/AuthenticatedUserGroupApplicationRequest'
        - type: 'null'
      description: List of group application requests the user can approve or has made
    member_requests:
      oneOf:
        - type: array
          items:
            $ref: '#/AuthenticatedUserGroupMemberRequest'
        - type: 'null'
      description: List of group membership requests the user can approve or has made
  required:
    - application_requests
    - member_requests
